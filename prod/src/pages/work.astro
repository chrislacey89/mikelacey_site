---
import { sanityClient } from 'sanity:client';
import BaseLayout from '../layouts/BaseLayout.astro';
import WorkSection from '../components/work/Work.astro';

// Fetch work data from Sanity
const [credits, photos, interviews] = await Promise.all([
  sanityClient.fetch(`
    *[_type == "credit"] | order(name asc) {
      "id": _id,
      name,
      network
    }
  `),
  sanityClient.fetch(`
    *[_type == "photo"] {
      "id": _id,
      "src": image.asset->url,
      "alt": image.alt,
      "caption": image.caption
    }
  `),
  sanityClient.fetch(`
    *[_type == "interview"] {
      "id": _id,
      title,
      description,
      youtubeUrl
    }
  `)
]);
---

<BaseLayout title="My Work - Mike Lacey">
  <WorkSection
    credits={credits}
    photos={photos}
    interviews={interviews}
  />
</BaseLayout>
