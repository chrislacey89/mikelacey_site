---
import { loadQuery } from '../lib/loadQuery';
import BaseLayout from '../layouts/BaseLayout.astro';
import StorySection from '../components/story/Story.astro';

// Fetch timeline events from Sanity
const timelineEvents = await loadQuery<any[]>({
  query: `
    *[_type == "timelineEvent"] | order(order asc) {
      "id": _id,
      year,
      title,
      narrative,
      "photo": photo.asset->url
    }
  `
});
---

<BaseLayout title="My Story - Mike Lacey">
  <StorySection timelineEvents={timelineEvents} />
</BaseLayout>
